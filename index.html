<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Fragebogen (15 Fragen, Mix aus Tiermetaphern)</title>
  <!-- Chart.js per CDN laden (Internetverbindung nÃ¶tig) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0 auto;
      max-width: 900px;
      background: #f7f9fc;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #1a73e8;
      margin-bottom: 5px;
    }
    p.beschreibung {
      text-align: center;
      margin-top: 0;
      font-size: 0.95em;
      color: #555;
    }
    .frage-box {
      background: #fff;
      margin: 20px 0;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .frage-box h2 {
      font-size: 1.1em;
      margin-top: 0;
    }
    .skala-antwort {
      margin-left: 20px;
      margin-top: 5px;
    }
    .skala-antwort label {
      display: inline-block;
      margin-right: 10px;
      cursor: pointer;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 12px 20px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    #ergebnis {
      background: #fff;
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #ergebnis h2 {
      margin-top: 0;
    }
    .tier-block {
      margin: 10px 0;
      padding: 10px;
      border-radius: 6px;
      background: #f0f0f0;
    }
    .tier-block h3 {
      margin-top: 0;
    }
    .tier-name {
      color: #333;
      font-size: 1.05em;
      font-weight: bold;
    }
    /* Canvas fÃ¼r das Tortendiagramm */
    #chart {
      display: block;
      max-width: 600px;
      margin: 20px auto;
    }
    /* Ergebnis-ErklÃ¤rung */
    .ergebnis-erklaerung {
      margin-top: 20px;
      font-size: 0.95em;
      color: #555;
    }
  </style>
</head>
<body>

<h1>Dein Fragebogen</h1>
<p class="beschreibung">
  WÃ¤hle fÃ¼r jede Aussage eine Zahl von 0 bis 4,<br>
  wobei 0 gar nicht zutrifft und 4 vÃ¶llig zutrifft.
</p>

<form id="fragebogen"></form>
<button form="fragebogen" type="submit">Auswerten</button>

<div id="ergebnis"></div>
<canvas id="chart"></canvas>

<script>
// =====================================================
// 1) FRAGEN (15 StÃ¼ck, inkl. Kombi in Frage 14 und Entwicklungsfeld in Frage 15)
// =====================================================
var questions = [
  {
    frage: "Frage 1: Was beschreibt deine bevorzugte Arbeitsweise am besten?",
    answers: {
      A: { code: "S1", text: "Ich Ã¼bernehme gerne Verantwortung, koordiniere Aufgaben und habe stets den GesamtÃ¼berblick." },
      B: { code: "S2", text: "Ich arbeite strukturiert, nutze etablierte Methoden und gehe Schritt fÃ¼r Schritt vor." },
      C: { code: "R1", text: "Ich bin robust und ausdauernd, bleibe auch in schwierigen Situationen standhaft." },
      D: { code: "R2", text: "Ich agiere flexibel und elegant, reagiere spontan auf neue Entwicklungen." }
    }
  },
  {
    frage: "Frage 2: Wie gehst du mit Konflikten um?",
    answers: {
      A: { code: "S3", text: "Ich suche aktiv den Austausch, bevorzuge kooperative LÃ¶sungen und fÃ¶rdere neue Ideen." },
      B: { code: "S4", text: "Ich passe mich an und versuche, Auseinandersetzungen zu entschÃ¤rfen, bevor sie eskalieren." },
      C: { code: "R3", text: "Ich bin bereit, provokant und unkonventionell vorzugehen, um Konflikte aufzubrechen." },
      D: { code: "R4", text: "Ich bleibe ruhig, schaffe StabilitÃ¤t und vermittle zwischen den Parteien." }
    }
  },
  {
    frage: "Frage 3: Was motiviert dich am meisten?",
    answers: {
      A: { code: "S5", text: "GroÃŸe Herausforderungen, bei denen ich Kraft und Ausdauer beweisen kann." },
      B: { code: "S6", text: "Eine visionÃ¤re, idealistische Einstellung â€“ ich lasse mich von groÃŸen Zielen inspirieren." },
      C: { code: "R5", text: "Strategische LÃ¶sungen finden, Chancen nutzen und dabei clever vorgehen." },
      D: { code: "R6", text: "Schnell zupacken, dynamisch sein und jede Gelegenheit sofort nutzen." }
    }
  },
  {
    frage: "Frage 4: Wie reagierst du auf VerÃ¤nderungen?",
    answers: {
      A: { code: "S7", text: "Ich bleibe stabil, kann mich aber schnell neuen Bedingungen anpassen." },
      B: { code: "S8", text: "Ich analysiere VerÃ¤nderungen grÃ¼ndlich und versuche, kluge Entscheidungen zu treffen." },
      C: { code: "R7", text: "Ich gehe eher vorsichtig und schrittweise vor, brauche Zeit fÃ¼r Umstellungen." },
      D: { code: "R8", text: "Ich bin mutig und Ã¼bernehme Verantwortung, sobald sich eine Chance zeigt." }
    }
  },
  {
    frage: "Frage 5: Welche Aspekte sind dir in deiner Arbeit wichtig?",
    answers: {
      A: { code: "S9", text: "Besonnene Entscheidungen: Ich mÃ¶chte nichts Ã¼berstÃ¼rzen." },
      B: { code: "S10", text: "Strategie und Innovation: Ich nutze gern jede MÃ¶glichkeit, kreativ vorzugehen." },
      C: { code: "R11", text: "Manchmal setze ich provokante Akzente, um festgefahrene Denkweisen aufzubrechen." },
      D: { code: "R12", text: "Effizienz und ZuverlÃ¤ssigkeit: Ich arbeite konsequent und konstruktiv am Gesamterfolg." }
    }
  },
  {
    frage: "Frage 6: Wie triffst du Entscheidungen?",
    answers: {
      A: { code: "S11", text: "Ich klÃ¤re erst alle Fragen im Team und gehe kommunikativ vor." },
      B: { code: "S12", text: "Ich bin loyal und setze auf BewÃ¤hrtes, bevor ich ein Risiko eingehe." },
      C: { code: "R9", text: "Ich entscheide blitzschnell und entschlossen, oft ohne lange zu zÃ¶gern." },
      D: { code: "R10", text: "Ich bin neugierig, spontan und lasse mich auch vom BauchgefÃ¼hl leiten." }
    }
  },
  {
    frage: "Frage 7: Wie wichtig ist dir UnabhÃ¤ngigkeit?",
    answers: {
      A: { code: "S13", text: "Sehr wichtig: Ich vereine vielseitige FÃ¤higkeiten und arbeite gerne eigenstÃ¤ndig und kreativ." },
      B: { code: "S14", text: "Ich lege Wert auf DurchsetzungsfÃ¤higkeit und unabhÃ¤ngiges Handeln." },
      C: { code: "R15", text: "Teamgeist und gemeinsamer Erfolg sind fÃ¼r mich entscheidend." },
      D: { code: "R16", text: "Eine gute Kommunikation stÃ¤rkt den Zusammenhalt â€“ ich priorisiere das Miteinander." }
    }
  },
  {
    frage: "Frage 8: Wie gehst du mit Verantwortung um?",
    answers: {
      A: { code: "S15", text: "Ich Ã¼bernehme gerne fÃ¼hrende Rollen und motiviere andere." },
      B: { code: "S16", text: "Ich bin zuverlÃ¤ssig, stehe zu meinen Aufgaben und halte meine Zusagen ein." },
      C: { code: "R13", text: "Ich setze Verantwortung strategisch ein, um Ziele zu erreichen." },
      D: { code: "R14", text: "Ich verknÃ¼pfe Verantwortung mit neuen Ideen und innovativen Konzepten." }
    }
  },
  {
    frage: "Frage 9: Wie gehst du mit Kritik um?",
    answers: {
      A: { code: "S17", text: "Ich bin offen, reflektiere mein Handeln und verbessere mich kontinuierlich." },
      B: { code: "S18", text: "Ich bleibe entschlossen bei meinem Weg, lasse mich nicht so leicht beirren." },
      C: { code: "R19", text: "Ich nehme mir Zeit fÃ¼r grÃ¼ndliche Selbstreflexion, um daraus zu lernen." },
      D: { code: "R20", text: "Ich bleibe stabil, nutze konstruktives Feedback als Chance zur Weiterentwicklung." }
    }
  },
  {
    frage: "Frage 10: Welche Rolle nimmst du im Team ein?",
    answers: {
      A: { code: "S19", text: "Ich zeige FÃ¼hrungsstÃ¤rke, bin mutig und Ã¼bernehme Verantwortung." },
      B: { code: "S20", text: "Ich kÃ¼mmere mich um Details, arbeite sorgfÃ¤ltig und unterstÃ¼tze zuverlÃ¤ssig." },
      C: { code: "R21", text: "Ich agiere visionÃ¤r und bringe frische Impulse von auÃŸen ein." },
      D: { code: "R22", text: "Ich bin kraftvoll und setze meine Energie entschlossen ein, Herausforderungen offensiv anzugehen." }
    }
  },
  {
    frage: "Frage 11: Wie planst du langfristig?",
    answers: {
      A: { code: "S21", text: "Mit viel Energie und Enthusiasmus, immer auf der Suche nach neuen Chancen." },
      B: { code: "S22", text: "Clever und pragmatisch: Ich passe meine Strategie flexibel den UmstÃ¤nden an." },
      C: { code: "R17", text: "Ich wahre den Ãœberblick, formuliere klare Visionen und setze sie strategisch um." },
      D: { code: "R18", text: "Ich bleibe besonnen und Ã¼berlegt, lasse mich selbst durch Stress kaum aus der Ruhe bringen." }
    }
  },
  {
    frage: "Frage 12: Wie bewÃ¤ltigst du stressige Situationen?",
    answers: {
      A: { code: "S23", text: "Ich strahle Ruhe und Struktur aus, bleibe gelassen selbst unter Druck." },
      B: { code: "S24", text: "Ich passe mich an, finde kreative Wege, selbst wenn es turbulent wird." },
      C: { code: "R25", text: "Ich arbeite systematisch und detailliert, um Fehler und Stress zu minimieren." },
      D: { code: "R26", text: "Ich setze mir klare Ziele und bleibe trotz Druck fokussiert auf HÃ¶chstleistung." }
    }
  },
  {
    frage: "Frage 13: Welche besondere StÃ¤rke bringst du in den Beruf mit?",
    answers: {
      A: { code: "S25", text: "Ich bin engagiert, innovativ und unterstÃ¼tze das Team verlÃ¤sslich." },
      B: { code: "S26", text: "Ich bin robust, ausdauernd und scheue mich nicht vor groÃŸen Herausforderungen." },
      C: { code: "R23", text: "Ich bin flexibel, reagiere schnell und gehe offen auf VerÃ¤nderungen zu." },
      D: { code: "R24", text: "Ich bin kooperativ, kreativ und bringe Ideen ein, die das Team voranbringen." }
    }
  },
  {
    frage: "Frage 14: Welche StÃ¤rken beschreiben dich am besten?",
    answers: {
      A: { code: "C1", text: "FleiÃŸ, FlexibilitÃ¤t, Eleganz, visionÃ¤re AnsÃ¤tze (vereint mehrere Eigenschaften)." },
      B: { code: "C2", text: "Robust, unabhÃ¤ngig, zupackend, meistert groÃŸe Herausforderungen." },
      C: { code: "C3", text: "Gelassen, bedÃ¤chtig, weise, strategisch â€“ oft mit ruhiger Energie." },
      D: { code: "C4", text: "Manchmal provokant, loyal, spontan und ideenreich in neuen Situationen." }
    }
  },
  {
    frage: "Frage 15: In welchem Bereich erkennst du fÃ¼r dich persÃ¶nlich ein Entwicklungsfeld?",
    answers: {
      A: { code: "C1", text: "Ich nehme mir vor, Kontrolle auch mal abzugeben und nicht alles perfekt machen zu wollen." },
      B: { code: "C2", text: "Ich mÃ¶chte lernen, mit Impulsen bewusster umzugehen und Geduld zu entwickeln." },
      C: { code: "C3", text: "Ich arbeite daran, Entscheidungen mutiger zu treffen und nicht zu lange zu zÃ¶gern." },
      D: { code: "C4", text: "Ich versuche, meine SpontanitÃ¤t zu strukturieren und emotionalen AusbrÃ¼chen vorzubeugen." }
    }
  }
];

// =====================================================
// 2) CODE -> TIER (+ KombiMapping fÃ¼r C1â€“C4)
// =====================================================
var codeToTier = {
  // S* / R* - Codes, wie gehabt
  S1: "Adler",   S2: "Ameise",   R1: "Yak",     R2: "Katze",
  S3: "Biene",   S4: "ChamÃ¤leon",R3: "Parasit", R4: "Wal",
  S5: "Dinosaurier", S6: "Einhorn", R5: "Schakal", R6: "Piranha",
  S7: "Eiche",   S8: "Eule",     R7: "Maus",    R8: "LÃ¶we",
  S9: "Faultier",S10: "Geier",   R11: "Insekt (lÃ¤stig)", R12: "Insekt (nÃ¼tzlich)",
  S11: "Gibbon", S12: "Hund",    R9: "Klapperschlange", R10: "Kind",
  S13: "Hybrid", S14: "HyÃ¤ne",   R15: "Hund",   R16: "Gibbon",
  S15: "Insekt (nÃ¼tzlich)", S16: "Insekt (lÃ¤stig)", R13: "HyÃ¤ne", R14: "Hybrid",
  S17: "Kind",   S18: "Klapperschlange", R19: "Eule", R20: "Eiche",
  S19: "LÃ¶we",   S20: "Maus",    R21: "Einhorn", R22: "Dinosaurier",
  S21: "Piranha",S22: "Schakal", R17: "Geier",  R18: "Faultier",
  S23: "Wal",    S24: "Parasit", R25: "Ameise", R26: "Adler",
  S25: "Katze",  S26: "Yak",     R23: "ChamÃ¤leon", R24: "Biene"
};

// Antwortkombinationen in Frage 14 -> mehrere Tiere gleichzeitig
var comboMapping = {
  C1: ["Adler","Ameise","Biene","ChamÃ¤leon","Wal","Einhorn"],
  C2: ["Yak","Katze","Parasit","Dinosaurier","Schakal","Piranha"],
  C3: ["Eiche","Eule","Maus","LÃ¶we","Faultier","Geier","Hybrid"],
  C4: ["Insekt (lÃ¤stig)","Insekt (nÃ¼tzlich)","Klapperschlange","Kind","HyÃ¤ne","Hund","Gibbon"]
};

// =====================================================
// 3) TIER-BESCHREIBUNGEN
// =====================================================
var tierTexte = {
  "Adler": "ğŸ¦… Fokussiert, Weitblick, FÃ¼hrungsqualitÃ¤ten",
  "Ameise": "ğŸœ FleiÃŸig, strukturiert, Organisationstalent",
  "Yak": "ğŸ‚ Robust, ausdauernd â€“ Fels in der Brandung",
  "Katze": "ğŸˆ Elegant, unabhÃ¤ngig, anpassungsfÃ¤hig",
  "Biene": "ğŸ Kooperativ, kreativ, gemeinschaftsorientiert",
  "ChamÃ¤leon": "ğŸ¦ AnpassungsfÃ¤hig, flexible LÃ¶sungen",
  "Parasit": "ğŸª± Unkonventionell, neue DenkansÃ¤tze",
  "Wal": "ğŸ‹ Ruhepol, vermittelt StabilitÃ¤t",
  "Dinosaurier": "ğŸ¦– Kraftvoll, meistert groÃŸe Herausforderungen",
  "Einhorn": "ğŸ¦„ VisionÃ¤r, idealistisch, inspiriert andere",
  "Schakal": "ğŸ¦Š Clever, strategisch, nutzt Chancen",
  "Piranha": "ğŸŸ Dynamisch, entschlossen, packt schnell an",
  "Eiche": "ğŸŒ³ Stabil, bodenstÃ¤ndig, weise Entscheidungen",
  "Eule": "ğŸ¦‰ Nachdenklich, analytisch, kluge Einsichten",
  "Maus": "ğŸ Vorsichtig, detailorientiert, zuverlÃ¤ssig",
  "LÃ¶we": "ğŸ¦ Mutig, Ã¼bernimmt gerne Verantwortung",
  "Faultier": "ğŸ¦¥ BedÃ¤chtig, reflektiert, geht Stress aus dem Weg",
  "Geier": "ğŸ¦… (Geier) Vorausschauend, strategisch, ressourcenschonend",
  "Insekt (lÃ¤stig)": "ğŸ Manchmal provokant, stÃ¶rt Komfortzonen",
  "Insekt (nÃ¼tzlich)": "ğŸ Effizient, konstruktiv, Teamplayer",
  "Gibbon": "ğŸ’ Kommunikativ, fÃ¶rdert Zusammenhalt",
  "Hund": "ğŸ• Loyal, vertraut auf BewÃ¤hrtes",
  "Klapperschlange": "ğŸ Schnell, entschlossen, kann zustechen",
  "Kind": "ğŸ‘¶ Neugierig, spontan, unvoreingenommen",
  "HyÃ¤ne": "ğŸ¦ (HyÃ¤ne?) Durchsetzungsstark, zielorientiert, flexibel",
  "Hybrid": "ğŸ”€ Vielseitig, innovativ, verbindet Verschiedenes"
};
var tierKonflikte = {
  "Adler": {
    "Kind": "Der Adler denkt strategisch und strebt nach Kontrolle â€“ das spontane Kind folgt lieber seiner Neugier.",
    "Faultier": "Adlers Dynamik trifft auf das entschleunigte Tempo des Faultiers â€“ das kann zu Frust fÃ¼hren."
  },
  "Ameise": {
    "Piranha": "Die strukturierte Ameise plant sorgfÃ¤ltig â€“ der Piranha springt ohne zu zÃ¶gern ins Chaos.",
    "Parasit": "Die arbeitsame Ameise empfindet die provokante Art des Parasiten als stÃ¶rend."
  },
  "Yak": {
    "Kind": "Der stabile Yak braucht Ruhe â€“ das impulsive Kind bringt Unordnung in seine Welt.",
    "Piranha": "Yak geht Aufgaben geduldig an â€“ der Piranha drÃ¤ngt zu sofortigem Handeln."
  },
  "Katze": {
    "Hund": "Die unabhÃ¤ngige Katze will Freiraum â€“ der Hund sucht NÃ¤he und Bindung.",
    "Gibbon": "Katzen schweigen gern â€“ Gibbons kommunizieren stÃ¤ndig. Da prallen Welten aufeinander."
  },
  "Biene": {
    "Klapperschlange": "Die teamorientierte Biene wird von der direkten Art der Klapperschlange oft verletzt.",
    "Dinosaurier": "Die Biene denkt kooperativ â€“ der Dinosaurier agiert machtvoll und ohne RÃ¼cksicht."
  },
  "ChamÃ¤leon": {
    "Eule": "Das anpassungsfreudige ChamÃ¤leon wechselt oft die Richtung â€“ die Eule sucht klare Linien.",
    "Eiche": "ChamÃ¤leons Wandelbarkeit irritiert die standfeste Eiche."
  },
  "Parasit": {
    "Wal": "Der Parasit bringt Unruhe â€“ der Wal braucht Harmonie und Tiefe.",
    "Gibbon": "Der Parasit denkt individualistisch â€“ der Gibbon sucht Verbindung und Teamgeist."
  },
  "Wal": {
    "Schakal": "Der Wal mÃ¶chte inneren Frieden â€“ der Schakal spielt taktisch mit Menschen.",
    "Kind": "Wal liebt BestÃ¤ndigkeit â€“ das Kind bringt Chaos in ruhige GewÃ¤sser."
  },
  "Dinosaurier": {
    "ChamÃ¤leon": "Der massive Dinosaurier ist unbeweglich â€“ das ChamÃ¤leon flieÃŸt durch VerÃ¤nderung.",
    "Einhorn": "Dinosaurier denkt praktisch â€“ das Einhorn trÃ¤umt von Utopien."
  },
  "Einhorn": {
    "HyÃ¤ne": "Das sensible Einhorn sucht Inspiration â€“ die HyÃ¤ne handelt kÃ¼hl und berechnend.",
    "Klapperschlange": "Einhorn will Harmonie â€“ Klapperschlange konfrontiert direkt."
  },
  "Schakal": {
    "Wal": "Der analytische Schakal sieht im Wal einen trÃ¤gen Blockierer.",
    "Kind": "Der listige Schakal kann mit kindlicher NaivitÃ¤t wenig anfangen."
  },
  "Piranha": {
    "Eule": "Piranha stÃ¼rzt los â€“ die Eule analysiert zuerst. Diese Tempi passen selten zusammen.",
    "Faultier": "Der Piranha wird vom bedachten Tempo des Faultiers gebremst."
  },
  "Eiche": {
    "ChamÃ¤leon": "Die unbeirrbare Eiche versteht das anpassungsfreudige ChamÃ¤leon nicht.",
    "Piranha": "Eiche handelt Ã¼berlegt â€“ Piranha agiert aggressiv. Da knirscht es im GebÃ¤lk."
  },
  "Eule": {
    "Kind": "Die nachdenkliche Eule analysiert lange â€“ das Kind springt emotional dazwischen.",
    "HyÃ¤ne": "Die Eule liebt Tiefe â€“ die HyÃ¤ne liebt Ergebnisse. Beides zusammen geht schwer."
  },
  "Maus": {
    "LÃ¶we": "Die vorsichtige Maus fÃ¼hlt sich vom durchsetzungsstarken LÃ¶wen oft Ã¼berrollt.",
    "HyÃ¤ne": "Die Maus vermeidet Konflikte â€“ die HyÃ¤ne geht mitten hinein."
  },
  "LÃ¶we": {
    "Maus": "Der LÃ¶we Ã¼bernimmt â€“ die Maus zieht sich zurÃ¼ck. Schwer hier ein Gleichgewicht zu finden.",
    "Eule": "Der impulsive LÃ¶we ist der Eule zu schnell und unbedacht."
  },
  "Faultier": {
    "Adler": "Das Faultier sucht innere Ruhe â€“ der Adler will HÃ¶henflÃ¼ge und Geschwindigkeit.",
    "Piranha": "Faultier fÃ¼hlt sich vom Energielevel des Piranhas Ã¼berfordert."
  },
  "Geier": {
    "Kind": "Der strategische Geier denkt langfristig â€“ das Kind lebt im Hier und Jetzt.",
    "ChamÃ¤leon": "Der Geier vertraut Planbarkeit â€“ das ChamÃ¤leon erscheint ihm sprunghaft."
  },
  "Insekt (lÃ¤stig)": {
    "Hund": "Das provokante Insekt reizt den loyalen Hund â€“ der sucht nur Frieden.",
    "Kind": "Das Insekt kitzelt an Grenzen â€“ das Kind reagiert emotional und unkontrolliert."
  },
  "Insekt (nÃ¼tzlich)": {
    "Parasit": "Das nÃ¼tzliche Insekt handelt strukturiert â€“ der Parasit bringt gezielte Unordnung.",
    "Klapperschlange": "Das Team-Insekt will Kooperation â€“ die Schlange setzt lieber eigene Wege durch."
  },
  "Gibbon": {
    "Yak": "Der kommunikative Gibbon trifft auf die schweigsame Ruhe des Yaks.",
    "Parasit": "Gibbons offene Art eckt beim grenztestenden Parasit an."
  },
  "Hund": {
    "Katze": "Der anhÃ¤ngliche Hund sucht BestÃ¤tigung â€“ die Katze schÃ¤tzt UnabhÃ¤ngigkeit.",
    "Parasit": "Hund steht fÃ¼r Treue â€“ Parasit fÃ¼r Regelbruch. Das sorgt fÃ¼r Reibung."
  },
  "Klapperschlange": {
    "Wal": "Die konfrontative Klapperschlange bringt den ruhigen Wal aus dem Gleichgewicht.",
    "Kind": "Die entschlossene Schlange trifft auf kindliche SpontanitÃ¤t â€“ das endet selten harmonisch."
  },
  "Kind": {
    "Adler": "Das Kind lebt frei â€“ der Adler verlangt Struktur. Das sorgt fÃ¼r Konflikte.",
    "Geier": "Kind will erleben â€“ Geier will verstehen. Beide reden oft aneinander vorbei."
  },
  "HyÃ¤ne": {
    "Einhorn": "Die durchsetzungsstarke HyÃ¤ne agiert zielgerichtet â€“ das Einhorn trÃ¤umt sich in andere Welten.",
    "Biene": "HyÃ¤ne geht ihren Weg â€“ die Biene sucht Gemeinschaft. Da fehlt oft das VerstÃ¤ndnis."
  },
  "Hybrid": {
    "Ameise": "Der kreative Hybrid wechselt Perspektiven â€“ die Ameise wÃ¼nscht sich Planbarkeit.",
    "Yak": "Der innovative Hybrid will VerÃ¤nderung â€“ der Yak steht lieber fest auf vertrautem Boden."
  }
};
// =====================================================
// 4) SKALA (0â€“4) â€“ Nur Zahlen
// =====================================================
var skalenWerte = [
  { value: 0, label: "0" },
  { value: 1, label: "1" },
  { value: 2, label: "2" },
  { value: 3, label: "3" },
  { value: 4, label: "4" }
];

// =====================================================
// 5) FORMULAR GENERIEREN
// =====================================================
var formElem = document.getElementById("fragebogen");
for (var i = 0; i < questions.length; i++) {
  var q = questions[i];
  var box = document.createElement("div");
  box.className = "frage-box";
  box.innerHTML = "<h2>" + q.frage + "</h2>";

  var answerKeys = Object.keys(q.answers);
  for (var j = 0; j < answerKeys.length; j++) {
    var letter = answerKeys[j];
    var ans = q.answers[letter];

    var ansDiv = document.createElement("div");
    ansDiv.className = "skala-antwort";

    var radiosHTML = "";
    for (var k = 0; k < skalenWerte.length; k++) {
      radiosHTML +=
        '<label>' +
          '<input type="radio" ' +
            'name="frage' + i + '_' + ans.code + '" ' +
            'value="' + skalenWerte[k].value + '" ' +
            'required>' +
          skalenWerte[k].label +
        '</label>';
    }

    ansDiv.innerHTML =
      "<p><strong>" + letter + ":</strong> " + ans.text + "</p>" +
      radiosHTML;
    box.appendChild(ansDiv);
  }
  formElem.appendChild(box);
}

// =====================================================
// 6) AUSWERTUNG
// =====================================================
formElem.addEventListener("submit", function(evt){
  evt.preventDefault();
  var formData = new FormData(formElem);
  var tierCounts = {};

  // ZÃ¤hle alle Tierpunkte
  for (var i = 0; i < questions.length; i++) {
    var q = questions[i];
    var answerKeys = Object.keys(q.answers);

    for (var j = 0; j < answerKeys.length; j++) {
      var letter = answerKeys[j];
      var ans = q.answers[letter];
      var fieldName = "frage" + i + "_" + ans.code;
      var valStr = formData.get(fieldName);
      var valNum = parseInt(valStr, 10) || 0;

      if (comboMapping[ans.code]) {
        var tierList = comboMapping[ans.code];
var anteil = valNum / tierList.length;
tierList.forEach(function(tier){
  tierCounts[tier] = (tierCounts[tier] || 0) + anteil;
});

      } else {
        var singleTier = codeToTier[ans.code];
        tierCounts[singleTier] = (tierCounts[singleTier] || 0) + valNum;
      }
    }
  }

  // Gesamtsumme fÃ¼r Prozentberechnung
  var totalPoints = Object.values(tierCounts).reduce((sum, val) => sum + val, 0);

  // Sortierung nach Punkten
  var sortedTiers = Object.entries(tierCounts).sort((a, b) => b[1] - a[1]);
  var top5 = sortedTiers.slice(0, 5);
  var hauptprofile = top5.slice(0, 3);
  var nebenprofile = top5.slice(3, 5);

  var ergebnisElem = document.getElementById("ergebnis");
  ergebnisElem.innerHTML = "<h2>Dein Verhaltens-Mix</h2>";

  function renderTierBlock(title, tierList, top5Total) {
    var section = document.createElement("div");
    section.innerHTML = "<h3>" + title + "</h3>";
    tierList.forEach(function([tierName, value], idx) {
     var prozent = ((value / top5Total) * 100).toFixed(1);
      var tierDiv = document.createElement("div");
      tierDiv.className = "tier-block";
      var canvasId = "tierChart_" + tierName.replace(/\s+/g, "_");

      tierDiv.innerHTML = `
        <strong>${tierName}</strong> â€“ ${tierTexte[tierName] || ""}
        <br><em>${prozent}% innerhalb deiner Top 5</em>
        <canvas id="${canvasId}" width="300" height="150"></canvas>
      `;

      section.appendChild(tierDiv);

      setTimeout(() => {
        new Chart(document.getElementById(canvasId).getContext("2d"), {
          type: 'doughnut',
          data: {
            labels: [tierName, "Andere"],
            datasets: [{
              data: [value, top5Total - value],
              backgroundColor: ["#3498db", "#ecf0f1"]
            }]
          },
          options: {
            responsive: false,
            plugins: {
              legend: { display: false },
              title: { display: false }
            },
            cutout: "70%"
          }
        });
      }, 10);
    });
    ergebnisElem.appendChild(section);
  }

  var top5Total = top5.reduce((sum, el) => sum + el[1], 0);
renderTierBlock("ğŸ§­ Hauptprofile (Top 3)", hauptprofile, top5Total);
renderTierBlock("ğŸ§© Nebenprofile (Platz 4 & 5)", nebenprofile, top5Total);

  // ErklÃ¤rung am Ende
  var erklaerung = document.createElement("div");
  erklaerung.className = "ergebnis-erklaerung";
  erklaerung.innerHTML = `
    Diese Ãœbersicht zeigt deinen momentanen Verhaltens-Mix anhand von Tiermetaphern.
    Die <strong>Hauptprofile</strong> spiegeln dominante Eigenschaften wider,
    die <strong>Nebenprofile</strong> ergÃ¤nzen sie durch weitere Facetten.
    Die Prozentzahlen basieren auf allen Antworten und visualisieren dein aktuelles Gesamtbild.
  `;




  ergebnisElem.appendChild(erklaerung);
var konfliktDiv = document.createElement("div");
konfliktDiv.className = "ergebnis-erklaerung";
konfliktDiv.style.marginTop = "20px";
konfliktDiv.innerHTML = "<h3>âš¡ Potenzielle Spannungsfelder</h3><ul>";

hauptprofile.forEach(function([tierName]) {
  var konflikte = tierKonflikte[tierName];
  if (konflikte) {
    Object.entries(konflikte).forEach(([gegner, beschreibung]) => {
      konfliktDiv.innerHTML += `
        <li><strong>${tierName}</strong> steht potenziell im Widerspruch zu <em>${gegner}</em>: ${beschreibung}</li>
      `;
    });
  }
});

konfliktDiv.innerHTML += "</ul>";
ergebnisElem.appendChild(konfliktDiv);

  // Reflektionstext ergÃ¤nzen
  var reflekt = document.createElement("div");
  reflekt.className = "ergebnis-erklaerung";
  reflekt.style.marginTop = "20px";
  reflekt.innerHTML = `
    <h3>ğŸ” Wie du dein Ergebnis verstehen kannst</h3>
    <p>
      Die dargestellten Tiermetaphern symbolisieren verschiedene Seiten deines Verhaltens â€“ 
      keine davon ist "besser" oder "richtiger" als die andere.
    </p>
    <p>
      Dein Mix zeigt, welche StÃ¤rken bei dir aktuell im Vordergrund stehen. 
      Vielleicht erkennst du dich in einem mutigen <strong>LÃ¶wen</strong>, einer strukturierten <strong>Ameise</strong> 
      oder einem anpassungsfÃ¤higen <strong>ChamÃ¤leon</strong> wieder.
    </p>
    <p>
      Je nach Lebensphase, Rolle oder Herausforderung kÃ¶nnen sich diese Anteile verÃ¤ndern. 
      Ein starker â€Adlerâ€œ-Anteil zeigt etwa Fokus und Ãœberblick, 
      wÃ¤hrend ein hoher â€Walâ€œ-Wert auf innere Ruhe und StabilitÃ¤t hinweist.
    </p>
    <p>
      Dein Verhaltens-Mix ist kein endgÃ¼ltiges Urteil, sondern eine Momentaufnahme â€“ 
      und zugleich eine Einladung zur Selbstreflexion:
      <em>Was erkennst du wieder? Was willst du weiterentwickeln?</em>
    </p>
    <p><strong>Nutze dein Tierprofil nicht als Schublade â€“ sondern als Spiegel.</strong></p>
  `;
  ergebnisElem.appendChild(reflekt);
});
</script>

</body>
</html>
